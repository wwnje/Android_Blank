<?php

/*
 * 获得JSON数据
 * 返回值：title desc time content_url pic_url
 */
 
 require 'mysql_connect.php';
 
 /*$n = 0;
 $result = mysql_query("select * from news");

 while ($row = mysql_fetch_array($result)){
 	$arr[$n++] = array("title" => $row['title'],
 						"desc" => $row['desc'],
 						"time" => $row['time'],
 						"content_url" => $row['content_url'],
 						"pic_url" => $row['pic_url']
					);

 }
 
 //数组转换为JSON字符串
 echo json_encode($arr);

*/


$sql ="select * from news"; //SQL
$result =mysql_query($sql);//执行SQL
$json ="";
$data =array(); //定义好一个数组.PHP中array相当于一个数据字典.
//定义一个类,用到存放从数据库中取出的数据.

class User 
{
public $title ;
public $desc ;
public $time ;
public $content_url ;
public $pic_url ;
public $type ;
}

//
while ($row= mysql_fetch_array($result, MYSQL_ASSOC))
{
$user =new User();
$user->title = $row["title"];
$user->desc = $row["desc"];
$user->time = $row["time"];
$user->content_url = $row["content_url"];
$user->pic_url = $row["pic_url"];
$user->type = $row["type"];


$data[]=$user;
}
$json = json_encode($data);//把数据转换为JSON数据.
echo "{".'"user"'.":".$json."}";



?>